<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Ruby 2.1发布，带来新的垃圾收集器</h3><p>Ruby 2.1正式版已经<a href="http://www.ruby-lang.org/en/news/2013/12/25/ruby-2-1-0-is-released/">发布</a>，带来了很多<a href="http://www.infoq.com/news/2013/09/ruby-2-1-gc-revamp">预期</a>的改进，其中包括对垃圾收集器的大幅改动，这一改进将在现在和未来带来一些性能提升。</p>
<p>Ruby 2.1中的垃圾收集器实现了一种分代垃圾收集形式，Ruby把它的这种实现称为“RGenGC（Restricted Generational Garbage Collection）”。它替换了Ruby之前版本中采用的“Mark &amp; Sweep（标记与清除）”实现。Ruby开发者Koichi Sasada在2013年4月的一次演讲中提到，对Ruby开发者而言，挑战在于实现一个可以在同一堆内处理保护对象和非安全对象的GC算法。</p>
<p>因为重写所有现有的C扩展以利用新的GC并不现实，所以作为实现的一部分，RGenGC实现中使用了写屏障（Write-Barrier）。就像Sasada在RubyConf 2013的演进（<a href="http://www.atdot.net/~ko1/activities/rubyconf2013-ko1_pub.pdf">PDF</a>）中所解释的那样，最初的两种选择是：A) 根本不实现分代垃圾收集（与Ruby 2.0和之前版本中的做法一样），或B)实现分代垃圾收集，同时需要重写所有C扩展。RGenGC在这两种选择之外提供了第三种方式。</p>
<p>RGenGC与现有扩展高度兼容，同时仍然带来了性能提升。常用的Array、String、Hash、Object和Numeric等对象都有写屏障保护，因此能够利用RGenGC系统。未来在内部库和外部库上的工作也为以后进一步改进性能带来了可能性。</p>
<p>新的垃圾收集系统不是唯一的改进，其他改进包括RDoc 4.1.0、RubyGems 2.2.0以及一些库的更新。完整的改进列表请参见该项目GitHub页面的<a href="https://github.com/ruby/ruby/blob/v2_1_0/NEWS">发布说明</a>。</p>
<p><strong>查看英文原文：</strong><a href="http://www.infoq.com/news/2013/12/ruby21">Ruby 2.1.0 Released, Delivering new GC</a></p><br><br><br><br><br><br></body></html>