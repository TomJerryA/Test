<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Docker提供对Mac OS X和BTRFS的支持</h3><p>作为<a href="http://blog.docker.io/2014/02/docker-0-8-quality-new-builder-features-btrfs-storage-osx-support/">0.8版本</a>的一部分，Docker.io团队宣布Docker已经支持<a href="http://docs.docker.io/en/latest/installation/mac/">在Mac OS X上安装</a>，还支持使用<a href="http://en.wikipedia.org/wiki/Btrfs">BTRFS</a>替代<a href="http://en.wikipedia.org/wiki/Aufs">AUFS</a>。</p>
<p>对Mac的支持是通过两个组件实现的，一个是<a href="http://get.docker.io/builds/Darwin/x86_64/docker-latest">原生的Docker OS X客户端</a>，一个是轻量级的<a href="https://github.com/steeve/boot2docker">Boot2Docker</a>虚拟机（VM），该虚拟机必须在<a href="http://en.wikipedia.org/wiki/Virtualbox">VirtualBox</a>中运行（因为OS X没有提供Docker所需的Linux容器这种底层支持）。在该版本发布之前，Mac用户必须在Linux虚拟机中运行Docker客户端和后台程序。</p>
<p>Docker团队曾经表明，他们希望把Linux容器（<a href="http://en.wikipedia.org/wiki/Lxc">LXC</a>）以及其他依赖移植到OS X上，但是到目前为止他们的后台程序还是必须在虚拟机中运行。Boot2Docker提供了一个最小化的Linux环境，以及一组可以配合VirtualBox使用的命令行脚本。Boot2Docker提供了生命周期管理，还可以处理SSH和虚拟机中运行的Docker后台程序之间的端口映射。它使用了DOCKER_HOST环境变量，这样客户端就能通过TCP 连接到Docker后台程序，而不是通过默认的原生Unix套接字。遗憾的是Boot2Docker还没有集成Docker自己的端口映射机制，所以就目前而言，要从宿主Mac机器连接到在容器中运行的服务，<a href="https://github.com/dotcloud/docker/issues/4007">在VirtualBox和Docker中映射端口</a>还是必要的。</p>
<p>BTRFS驱动被描述为实验特性，而且需要先创建好一个BTRFS分区。对于Docker的工作而言，底层的写时复制（<a href="http://en.wikipedia.org/wiki/Copy_on_write">copy on write</a>）文件系统是必不可少的，映像以及从映像派生出的容器，都是由多个层次组成，其中每个层次映射到一个文件系统分支。<a href="http://en.wikipedia.org/wiki/Zfs">ZFS</a>驱动相关的工作也在进行之中。</p>
<p>Docker.io团队还宣布，他们从现在开始会采取每个月发布一个新版本的策略，每个月的第一周发布。发布日期不会与任何具体特性关联起来，也就是说，在此日期之前加入的特性会包含进来，后加入的特性则进入下一个发布窗口。此后Docker.io团队获得了由前VMware副总裁、<a href="http://www.greylock.com/teams/50-Jerry-Chen">Greylock Partners的Jerry Chen</a> 主导的 <a href="http://blog.docker.io/2014/01/docker-closes-15-m-series-b-funding/">$1500万美元的融资</a>。这笔钱将用于为Docker的产品化做好准备、构建出社区平台并寻找商业化之路。Docker团队还承诺，他们的<a href="https://github.com/dotcloud/docker">github主分支</a>将保持稳定，如果想获得最新版本，可以直接从主分支获取代码并构建。在最近这轮融资之前，<a href="http://www.infoq.com/news/2013/10/dotcloud-renamed-docker">dotCloud将公司的名字改成了Docker Inc</a>。</p>
<p>关于Docker以及它如何使用的更多背景信息，可以参看Zef Hemel的“<a href="http://www.infoq.com/cn/articles/docker-containers">Docker：利用Linux容器实现可移植的应用部署</a>”一文。</p>
<p><strong>查看英文原文：</strong><a href="http://www.infoq.com/news/2014/02/docker_0_8">Mac OS X and BTRFS support in Docker</a></p><br><br><br><br><br><br></body></html>