<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>PeerJS 0.1.7：一个用于浏览器内P2P通信的WebRTC封装器</h3><p><a href="http://github.com/michellebu">Michelle Bu</a>与<a href="http://github.com/ericz">Eric Zhang</a>在3月6日发布了<a href="http://peerjs.com/">PeerJS 0.1.7</a>，它封装了WebRTC。后者是W3C倡议的旨在促进浏览器内P2P通信的一种技术。</p> 
<p>与成长迅猛的<a href="http://www.w3.org/TR/2011/WD-websockets-20110929/">WebSocket</a>不同的是，PeerJS颠覆了由服务器组织数据传输的这种传统方式。</p> 
<p>Bu说：“WebSocket和WebRTC数据通道看起来一样——都支持二进制数据，还允许从一个客户端发送可能最终会到达另一客户端的任意数据，然而它们本质上是不同的。使用WebRTC数据通道，可以向其他任何节点传送数据而无需经由某些中心服务器。以Facebook或Google聊天程序为例，向坐在旁边的人发送一条消息需要相当多的时间。这是因为消息必须在物理上从你的计算机提交到需要路由50或60跳之远的Facebook服务器。从网络角度来看这非常不理想。理想状态下，这个包应该仅传输20英尺——这正是WebRTC的工作方式。之前整个网络拓扑看起来像一个蜘蛛，而现在更像是一张网。”</p> 
<p>拥抱这一新的生态系统吧！PeerJS旨在封装WebRTC规范的复杂性，使其成为一套易于理解的API。PeerJS的使用方式如下：</p> 
<ul> 
 <li>使用版本号26或更高版本的Chrome。这意味着当前只有<a href="https://www.google.com/intl/en/chrome/browser/canary.html">Canary</a>或<a href="https://www.google.com/intl/en/chrome/browser/beta.html">beta</a>版本的浏览器可以使用。在接下来几个月，请留意WebRTC的<a href="http://peerjs.com/status">浏览器兼容性更新</a>。Bu预计在2到3个月内将支持与最新版本的Firefox进行互操作。</li> 
 <li>建立一个节点服务器（PeerServer）。可以在代码托管网站注册，抓取代码自己构建，也可以在node.js上通过“npm install peer”命令安装。Bu说：“一旦连接到一个节点，就不再需要服务器了；除非想连接到更多的节点。”</li> 
 <li>启动代码。看一下<a href="https://github.com/peers/peerjs/blob/master/examples/helloworld.html">hello world例程</a>，了解“PeerJS省去了很多麻烦，不需要构建和运行代理（brokering）服务器，不需要理解纷繁复杂的WebRTC节点连接和数据通道规范（那可是需要设置无数的处理程序），不需要考虑边界情况，也不需要应对不同浏览器之间的差异。”Bu说道。</li> 
</ul> 
<p>由于WebRTC还在发展，除了少量聊天demo外，PeerJS在实践中的例子还很少。 <a href="http://peerkit.com/">PeerKit</a>是一个例外，它是Zhang创建的、作为P2P CDN的新兴项目。Bu说：“想象一下这样的世界：猫的图片来自咖啡店里在你旁边恰好浏览同一网站的人，而不是内华达州的中心服务器”。</p> 
<p>在浏览器之间，要在有状态的双向数据传输之上构建下一代应用，很可能还需要几年，但在此之前“WebRTC将是开发者的派对”，Bu这样说，“当考虑将所有状态都保存在客户端时，一定会有许多技术问题需要处理。”</p> 
<p><strong>查看英文原文</strong>：<a href="http://www.infoq.com/news/2013/03/peerjs-0.1.7-released;jsessionid=611F937905D9786AA76E0C53968B9CAC">PeerJS 0.1.7: A WebRTC Wrapper For P2P In The Browser</a></p> 
<hr /> 
<p>感谢<a href="http://www.infoq.com/cn/bycategory.action;jsessionid=611F937905D9786AA76E0C53968B9CAC?authorName=臧秀涛">臧秀涛</a>对本文的审校。</p> 
<p>给InfoQ中文站投稿或者参与内容翻译工作，请邮件至<a href="mailto:editors@cn.infoq.com">editors@cn.infoq.com</a>。也欢迎大家通过新浪微博（<a href="http://www.weibo.com/infoqchina">@InfoQ</a>）或者腾讯微博（<a href="http://t.qq.com/infoqchina">@InfoQ</a>）关注我们，并与我们的编辑和其他读者朋友交流。</p> 
<p id="lastElm"></p><br><br><br><br><br><br></body></html>