<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Redis开源文档《Redis设计与实现》</h3><p><a href="http://redis.io/">Redis</a>是运用比较广泛的NoSQL产品之一，目前的稳定版本是2.6.10，包括<a href="http://www.infoq.com/cn/interviews/chacon-github-cn;jsessionid=B2393D5FB6E6FE9F025523CE7C405058">Github</a>、<a href="http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs">Instagram</a>、Blizzard、<a href="http://www.infoq.com/cn/presentations/tfl-sina-weibo-platform-redis-practice;jsessionid=B2393D5FB6E6FE9F025523CE7C405058">新浪微博</a>等都在产品中大量使用了Redis。其代码基于BSD协议开源，整个项目代码量只有2万多行（2.2版本），大家可以通过阅读代码在相对短的时间内学习到作者的设计理念和Redis的实现方式，做到知其然知其所以然。</p> 
<p>日前黄健宏（<a href="http://huangz.me">huangz</a>）发布了开源文档<a href="http://www.redisbook.com/en/latest/">《Redis设计与实现》</a>，这是一份从阅读源代码入手来学习Redis的笔记合集，对于写这份文档的目的，作者如是说：</p> 
<blockquote> 
 <p>本书的目标是以简明易懂的方式讲解 Redis 的内部运行机制， 通过阅读本书， 你可以了解到 Redis 从数据结构到服务器构造在内的几乎所有知识。</p> 
</blockquote> 
<p>《Redis设计与实现》主要从高抽象层次在如下的5个方面对Redis的实现进行阐述：</p> 
<ol> 
 <li><a href="http://www.redisbook.com/en/latest/#id1">内部数据结构</a></li> 
 <li><a href="http://www.redisbook.com/en/latest/#id2">内存映射数据结构</a></li> 
 <li><a href="http://www.redisbook.com/en/latest/#id3">Redis数据类型</a></li> 
 <li><a href="http://www.redisbook.com/en/latest/#id4">功能的实现</a></li> 
 <li><a href="http://www.redisbook.com/en/latest/#id5">部分运作机制</a></li> 
</ol> 
<p>同时作者为了满足大家深入学习的需求，还对Redis 2.6的源代码进行了<a href="https://github.com/huangz1990/annotated_redis_source">详细注释</a>。</p> 
<p>《Redis设计与实现》的作者黄健宏（huangz）是一位90后，喜欢函数式编程，由于对数据库产生了兴趣才开始阅读Redis源代码，他这样看待整个阅读过程：</p> 
<blockquote> 
 <p>阅读 Redis 源码对我来说是一次全新的学习体验。当我刚开始看 Redis 源码的时候，我只会一些基本的数据结构和算法，没有任何网络编程、数据库或者系统编程方面的经验，基本是一边看源码，一边补充基础知识，然后才慢慢理解的。</p> 
</blockquote> 
<p>在问到阅读开源项目源代码时应该参照怎样的路线，他分享了自己的一些方法：</p> 
<blockquote> 
 <ol> 
  <li> <p>自底向上：从耦合关系最小的模块开始读，然后逐渐过度到关系紧密的模块。就好像写程序的测试一样，先从单元测试开始，然后才到功能测试。我在刚开始读 Redis 源码的时候，使用的就是这种方法：先从单独的数据结构模块开始，然后再过渡到高层的功能模块。</p> </li> 
  <li> <p>从功能入手：通过文件名（模块名）和函数名，快速定位到一个功能的具体实现，然后追踪整个实现的运作流程，从而了解该功能的实现方式。我在读阻塞列表、数据库这种流程和功能都比较复杂，和其他文件耦合也比较多的模块时，使用的就是这样的方法。</p> </li> 
  <li> <p>自顶向下：从程序的 main() 函数，或者某个特别大的调用者函数为入口，以深度优先或者广度优先的方式阅读它的源码。我在阅读 redis.c/serverCron() 、 redis.c/main() 和 ae.c/aeMain() 这种有明显调用者性质的函数时，使用的就是这样的方法。</p> </li> 
 </ol> 
</blockquote> 
<p>然后他强调：</p> 
<blockquote> 
 <p>这三种方法并不互相冲突：在某些函数/模块要用某种方法，而某些函数/模块要使用另一种方法，有时候又需要混合使用多种方法。</p> 
</blockquote> 
<p>值得一提的是本书已经以“保留所有权利”的方式开源，大家可以在<a href="https://github.com/huangz1990/redisbook">github</a>上查看内容的创作过程，同时这种开源的协作方式能让更多人参与内容优化中来。</p> 
<p>目前在Github上也有很多类似的内容，如：<a href="http://addyosmani.github.com/backbone-fundamentals/">Developing Backbone.js Applications</a>、<a href="https://github.com/progit/progit">ProGit</a>等，也许这种写作方式将会在技术领域引领一个新的内容创作潮流。</p> 
<p>亲爱的InfoQ读者，如果你也在阅读开源项目的源代码，并且有一些阅读心得希望和大家分享，欢迎和InfoQ的编辑们联系：editors@cn.infoq.com。</p> 
<p id="lastElm"></p><br><br><br><br><br><br></body></html>