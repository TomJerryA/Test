<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>PostgreSQL获得更好的NoSQL性能</h3><p>PostgreSQL 9.4测试版带来了备受期待的“二进制JSON”类型JSONB。这种面向文档数据的新的存储格式性能更优，而且带来了索引和用于操作JSON数据的函数和操作符。</p>
<p>JSONB类型<a href="http://obartunov.livejournal.com/177247.html">融合了HStore和JSON两个项目</a>。JSONB拥有JSON的一切，但它由于采用二进制表示而存储更高效，由于索引而速度更快。当前所有的HStore和JSON用户预计最终都将转到JSONB。</p>
<p>既然PostgreSQL的传统客户群一直是需要可靠的关系功能的开发人员，或者是从像Oracle这样的企业数据库切换过来的用户，那么为什么NoSQL功能对它而言如此重要？Josh Berkus是<a href="http://www.postgresql.org/community/contributors/">团队的核心成员</a>之一，他<a href="http://www.databasesoup.com/2014/02/why-hstore2jsonb-is-most-important.html?showComment=1393181805085#c8222906176754761423">分享了一些看法</a>：</p>
<blockquote> 
 <p>虽然Oracle的市场目前很大，但根本就不增长。Oracle用户中会转向PostgreSQL的人实际数目比那个更少。不管我们增加多少功能，我们永远都无法成为Oracle，也无法比Oracle做的更好。</p> 
 <p>创新技术之所以会成功是因为他们获得了新用户并扩大了市场。</p> 
</blockquote>
<p>另外，同一话题中的其它评论明确指出，若干将PostgreSQL与Node、Python、Go或者Ruby技术一起使用的创业公司是如何期待着使用快速JSON支持。</p>
<p>考虑到这些问题，很明显，对JSON提供一流的性能支持，而又无损于其传统强项，如可靠性，可以帮助PostgreSQL增加新的应用场景。</p>
<p>也有一些领域，使用其它的NoSQL数据库可能更合适——比如，EnterpriseDB的核心团队成员和高级数据库架构师Bruce Momijan就建议（通过邮件）——</p>
<blockquote> 
 <p>即使PostgreSQL扩展了功能和性能，也仍然有一些边缘情况，NoSQL解决方案可能更适合。对于有大量重复的非结构化数据，如日志文件，列存储的Cassandra就很好，它添加新节点更方便。不过，Postgres将准备好用于既能从NoSQL功能受益又需要符合ACID的应用程序。</p> 
</blockquote>
<p>EnterpriseDB的主要贡献者和高级数据库架构师Robert Haas补充道——</p>
<blockquote> 
 <p>一个例子就是，如果你正将MapReduce用于高度并发的查询处理，那么，在那种情况下，用像Hadoop那样的东西可能更好。另一个例子就是，如果你的数据模型需要对JSON大对象做大量小的更改，那么也许有若干NoSQL解决方案都能更高效地处理这种情况。</p> 
</blockquote>
<p>不过，除了特定的应用场景外，对于那些需要在同一个应用程序中针对不同的数据类型灵活地选用无模式存储或关系型存储以及需要保证ACID的开发人员而言，Postgres就开始能够做出令人信服的案例了。</p>
<p>请注意，JSONB并不是9.4中引入的唯一的主要功能，还有其它几项：</p>
<ul> 
 <li>“<a href="http://www.postgresql.org/docs/0.0/static/logicaldecoding.html">数据更改流API（Data Change Streaming API）</a>”允许对复制流进行解码和转换。这为支持高速和更灵活复制的新复制工具和扩展解决方案奠定了基础。</li> 
 <li>带有“refresh concurrently”选项的物化视图</li> 
 <li>ALTER SYSTEM SET允许从SQL命令行和远程客户端修改postgresql.conf，使管理更简单。</li> 
</ul>
<p>另外，它还包含若干小的功能——</p>
<ul> 
 <li>“<a href="http://www.postgresql.org/docs/devel/static/bgworker.html">动态的后台工作进程（Dynamic Background Workers）</a>”</li> 
 <li>“<a href="http://www.postgresql.org/docs/devel/static/warm-standby.html#STREAMING-REPLICATION-SLOTS">复制槽（Replication Slots</a>）”</li> 
 <li>改进了写可扩展性</li> 
 <li>多项性能改进，如聚合、更小的<a href="http://www.postgresql.org/docs/devel/static/gin.html">GIN</a>索引、减少了预写日志的量</li> 
 <li>可更新的安全屏障视图</li> 
 <li>新的数组操作函数和表函数</li> 
 <li>时滞备用服务器</li> 
 <li>更新MVCC系统目录</li> 
 <li>降低部分ALTER TABLE命令的锁级别</li> 
 <li>备份节流</li> 
 <li>WITHIN GROUP</li> 
</ul>
<p>读者可以从<a href="http://www.postgresql.org/docs/devel/static/release-9-4.html">发布说明</a>中查看完整的更新列表。</p>
<p><b>查看英文原文：</b><b><a href="http://www.infoq.com/news/2014/05/postgresql-9-4">PostgreSQL Gets Better NoSQL Capabilities</a></b></p><br><br><br><br><br><br></body></html>