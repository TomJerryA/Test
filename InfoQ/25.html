<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>微软推出Common XAML UI</h3><p>在.NET开发人员中间，一直有人抱怨基于XAML的不同用户界面种类太多。该问题开始于Silverlight，它有一套与WPF类似但不同的控件。Silverlight for Windows Phone增加了第三套，而XAML for WinRT则增加了第四套。</p>
<p>在4月2日的Build主题演讲中，我们听说微软最终已经开始了整合过程，推出了Common XAML UI。该UI框架基于XAML for WinRT，允许同样的UI代码在手机、平板电脑、台式电脑、最终在Xbox One上共享。</p>
<p>Common UI的基础是一个称为“共享项目”的新项目类型。这是Visual Studio的一个新概念，其工作方式与可移植类库有很大的不同。一个共享项目不能单独编译成DLL或EXE。相反，它会在构建时合并到一个或多个传统的项目类型中。传统项目的非正式名称为“项目头（project heads）”。</p>
<p>面板、按钮、文本框/按钮等核心基元在Windows和Windows Phone上将会有相同的行为。Hub、AppBar/CommandBar、日期/时间选择器、ListView、浮出控件和媒体等高级基元在两个平台上将会有相同的API，但行为不同。Ads SDK在两个平台上也有共用的API签名，但也是行为不同。</p>
<p>需要注意的是，部分功能会悄无声息地失效。例如，如果在CommandBar中有太多的按钮，那么Windows Phone将只渲染前面的几个。</p>
<p>虽然许多控件可以根据屏幕尺寸的不同伸缩，但有时候，开发人员需要针对某些设备定制控件的行为。一种实现方式是使用特定于平台的自定义控件。共享控件可以引用这些特定于平台的自定义控件，只要控件在每个项目头里有正确的名称。</p>
<p>提高代码重用的另一种选择是在后台代码中使用条件编译和#if def。从这个意义上讲，它就像在项目之间使用软链接共享源代码文件的经典方式。</p>
<p>资源文件提供了定制用户体验的第三种方式，用法与本地使用相同。以命令栏按钮为例，它们如何能按照预期在手机上小写，在台式电脑上首字母大写。</p>
<p>虽然大部分API现在可以共享，但有些特性并不是在所有平台都可用。最值得注意的有：</p>
<p>仅与于Windows平台的API</p>
<ul> 
 <li>SearchBox</li> 
 <li>Settings Flyout</li> 
</ul>
<p>仅用于Windows Phone平台的API</p>
<ul> 
 <li>Pivot</li> 
 <li>AutoSuggestBox</li> 
 <li>ContentDialog</li> 
 <li>Maps</li> 
 <li>System Chrome</li> 
 <li>Progress area, in-call UI</li> 
</ul>
<p>Windows和Windows Phone的后退按钮行为不同，因此可能需要围绕它们做些自定义工作。另外，有必要针对文件选择器、共享和设置编写特定于平台的代码。</p>
<p>Visual Studio 2013 Update 2的所有版本都提供了Common XAML和Universal Apps。</p>
<p><b>查看英文原文：</b><b><a href="http://www.infoq.com/news/2014/04/Common-XAML">Introducing Common XAML UI</a></b></p><br><br><br><br><br><br></body></html>