<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>JSON校验综述</h3><p>我们所创建的任何“灵活”或“可扩展的”文件格式，迟早都会因为校验的问题而遭受开发者们的抱怨。在处理校验问题方面有着很多的工具，但是通常可以将它们归为以下几类：</p> 
<ul> 
 <li>判断数据是否已被正确格式化</li> 
 <li>手动检查形式有误的数据并尝试纠正</li> 
 <li>手动检查形式有误的数据并将有误数据丢弃</li> 
 <li>自动检查形式有误的数据</li> 
</ul> 
<p>这篇文章的目的并非为了讨论这些选项，而是对自动校验方面的可用工具包进行了一些总结。</p> 
<p><b>JSON Schema</b></p> 
<p><a href="http://json-schema.org/implementations.html">JSON Schema</a> 是一个建议标准，并且已得到了17个不同项目的支持。它可在JavaScript、Java、Python、 Ruby、Perl、 PHP、.NET、ActionScript、C、 Haskell和Erlang等技术中使用。这种格式比VeriJSON更加复杂，模式与实际数据之间的关系几乎很难找到相似之处。然而它的功能也更加广泛，具备支持范围检查的数字、可限制的列表以及在列表中防止重复条目等功能。它同样还支持对<a href="http://json-schema.org/example2.html">其他模式</a><a href="http://json-schema.org/example2.html">的引用</a>，允许你将大型模式拆分成一个个较小的模式。</p> 
<p><b>Atdgen</b></p> 
<p>Atdgen对OCaml提供了JSON的序列化与反序列化支持。JSON的模式是使用atd文件创建的。通过一个代码生成器运行这些文件就可以生成OCaml类文件和匹配的对象/JSON转换器。在Atdgen中，校验是在反序列化过程中进行的。</p> 
<p>atd文件中的校验规则是开放的，开发者可以直接在atd文件中注入任意他们想要的OCaml代码。它支持对二级模式文件的引用。</p> 
<p><a href="http://mjambon.com/atdgen">Atdgen</a> 基于开源许可可用。</p> 
<p><b>DataContractJsonSerializer</b></p> 
<p><a href="http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx">DataContractJsonSerializer</a>基于WCF的DataContractSerializer，它使用类定义和数据契约属性来确定一个JSON文件应该如何进行校验和最终的反序列化。这种方式适合于基本的任务，但是也明显地显现出了性能问题，在字典方面也存在难点。它的校验非常受限于基本结构。</p> 
<p><b>Json.NET</b></p> 
<p>James Newton-King的Json.NET是迄今为止最具综合性的JSON序列化和反序列化工具。像DataContractJsonSerializer一样，Json.NET可以使用类来定义它的模式。你可以任意选择使用标准WCF数据契约属性或<a href="http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm">JSON.NET 的序列化属性</a>，同时它还支持了大量的类型，包括DataTable 和 nHibernate实体。而就在这个月，<a href="http://james.newtonking.com/archive/2013/04/07/json-net-5-0-release-1-net-4-5-biginteger-read-only-collections.aspx">JSON.NET 5.0</a> （通过BigInteger）支持了无大小限制的整数以及以IEnumerable构造器方式暴露的只读集合（collection）。</p> 
<p>JSON.NET同样支持通过JSON Schema进行校验。</p> 
<p><b>VeriJSON</b></p> 
<p>VeriJSON是一个依赖于基于模式匹配的Objective-C库。模式本身以JSON的方式编写。支持的类型有“number”、“string”、“bool”和“url”。字符串可以通过一个正则表达式来进行约束，而url则可以通过模式进行约束（例如：http，ftp）。以结构化的方式表现数组和对象，并支持可选的属性。</p> 
<p><a href="https://bitbucket.org/dcutting/verijson">VeriJSON</a>基于开源许可可用。</p> 
<p><b>英文原文链接</b>：<a href="http://www.infoq.com/news/2013/04/JSON-Validation;jsessionid=2B7CF64A427CBA004904F29E04677746">JSON Validation Roundup</a></p> 
<p id="lastElm"></p><br><br><br><br><br><br></body></html>