<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>SQL interativo no Apache Hadoop com Impala e Hive</h3><p>Dois projetos de c&oacute;digo fonte aberto, Impala e Hive como parte do projeto <a href="http://hortonworks.com/labs/stinger/">Stinger</a> est&atilde;o competindo pela lideran&ccedil;a na corrida pelo SQL interativo para implementa&ccedil;&otilde;es Big Data. Recentemente a Cloudera <a href="http://blog.cloudera.com/blog/2014/01/impala-performance-dbms-class-speed/">anunciou</a> que o Impala &eacute; de 6 a 69 vezes mais r&aacute;pido do que a vers&atilde;o 0.12 do Hive e superou em m&eacute;dia 2 vezes um n&atilde;o informado DBMS. A capacidade de utiliza&ccedil;&atilde;o de SQL interativo em n&oacute;s de servidores Hadoop significa que os dados s&oacute; precisam estar dispon&iacute;veis no HDFS podendo assim ser processados e analisados sem a necessidade de grandes transfer&ecirc;ncias.</p>
<p>Usando um <a href="https://github.com/cloudera/impala-tpcds-kit/blob/master/README.md">subconjunto modificado</a> de um refer&ecirc;ncia padr&atilde;o da ind&uacute;stria <a href="http://www.tpc.org/tpcds/">TPC-DS</a>, a Cloudera afirma que o Impala n&atilde;o &eacute; somente mais r&aacute;pido que Hive, mas que tamb&eacute;m trabalha no Hadoop, e &eacute; mais r&aacute;pido que um DBMS nativo usando armazenamento colunar. <a href="https://twitter.com/Dirk_deRoos">Dirk de Roos</a> da <a href="http://www-01.ibm.com/software/data/bigdata/">IBM</a> e outros <a href="http://sheffieldview.com/2014/01/17/cloudera-impala-a-closer-look/">criticaram</a> estes resultados obtidos pela utiliza&ccedil;&atilde;o de um subconjunto do TPC-DS em vez de todo o conjunto. Em uma outra situa&ccedil;&atilde;o ele executou testes usando uma tabela simples de fatos no Cloudera em vez dos seis que s&atilde;o utilizados pelo TPC-DS e isso poderia tamb&eacute;m ter sido utilizado para alcan&ccedil;ar melhores desempenhos.</p>
<p>Al&eacute;m de grandes velocidades, os usu&aacute;rios de neg&oacute;cio do Hadoop precisam da flexibilidade que os padr&otilde;es e ferramentas SQL podem oferecer. O suporte <a href="http://en.wikipedia.org/wiki/SQL#Standardization">ANSI SQL</a> <a href="http://www.cascading.org/lingual/">multilinguagem em cascata</a> pode ajudar as ferramentas de intelig&ecirc;ncia de neg&oacute;cios por meio da utiliza&ccedil;&atilde;o de <a href="http://en.wikipedia.org/wiki/ODBC">ODBC</a> a troca de trabalho entre o Hive e Impala. O Impala possui <a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/Impala/latest/Installing-and-Using-Impala/ciiu_langref.html">suporte para sub consultas</a>, <a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/Impala/latest/Installing-and-Using-Impala/ciiu_aggregate_functions.html?scroll=aggregate_functions">agrega&ccedil;&otilde;es</a> <a href="https://groups.google.com/a/cloudera.org/forum/#!topic/impala-user/6p5r_n9CbGk">e um acesso</a> a fun&ccedil;&otilde;es atrav&eacute;s do <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SubQueries">suporte</a> do Hive. Al&eacute;m disso instalar Impala em um n&oacute; de servidores Hadoop significa que um novo conjunto de <a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/Impala/latest/Installing-and-Using-Impala/ciiu_install.html">processos</a> ser&atilde;o executados em conjunto, considerando que o Hive tamb&eacute;m &eacute; executado na JVM podendo <a href="https://cwiki.apache.org/confluence/display/Hive/AdminManual+Installation">coexistir</a> no mesmo ambiente em que o Hadoop &eacute; executado.</p>
<p>Hive 0.12 &eacute; o codinome dado pela Hortonworks para a <a href="http://hortonworks.com/labs/stinger/">fase dois do Stinger</a>. Quem baixar esta vers&atilde;o poder&aacute; <a href="http://public-repo-1.hortonworks.com/HDP-LABS/Projects/Stinger/StingerTechnicalPreviewInstall.pdf">instalar</a> uma pr&eacute;-vers&atilde;o chamada de fase tr&ecirc;s do Stinger. Na fase tr&ecirc;s do Stinger o Hive <a href="https://cwiki.apache.org/confluence/display/Hive/Hive+on+Tez">trabalha com</a> o <a href="http://tez.incubator.apache.org/">Tez</a> que &eacute; um framework de uma aplica&ccedil;&atilde;o constru&iacute;da sobre o <a href="http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html">Apache Hadoop NextGen MapReduce(YARN)</a>. Uma outra melhoria relacionada com a &aacute;rea de desempenho &eacute; a <a href="https://cwiki.apache.org/confluence/display/Hive/Vectorized+Query+Execution">execu&ccedil;&atilde;o vetorizada de consultas</a> que &eacute; an&aacute;loga ao <a href="http://blog.cloudera.com/blog/2013/02/inside-cloudera-impala-runtime-code-generation/">tempo de execu&ccedil;&atilde;o de c&oacute;digos</a> do Impala. Coma exemplicado pelo engenheiro <a href="http://www.windowsazure.com/en-us/services/hdinsight/">HDInsight</a> da <a href="http://www.microsoft.com/">Microsoft</a> <a href="http://www.infoq.com/news/2014/02/www.linkedin.com/in/ericnhanson">Eric Hanson</a>, a execu&ccedil;&atilde;o vetorizada de consultas pode proporcionar um aumento de desempenho da CPU na execu&ccedil;&atilde;o de consultas com cen&aacute;rios intensos. A fase tr&ecirc;s do Stinger pode proporcionar um <a href="http://hortonworks.com/blog/3-reasons-try-stinger-phase-3-technical-preview/">impulso</a> no aumento de desempenho e melhorar a utiliza&ccedil;&atilde;o de recursos sob v&aacute;rios casos de uso.</p>
<p>No cen&aacute;rio de tecnologia de c&oacute;digos abertos para SQL interativos, uma nova alternativa surgiu recentemente da mesma empresa que tornou o<a href="http://www.sfbayacm.org/wp/wp-content/uploads/2010/01/sig_2010_v21.pdf"> c&oacute;digo do Hive aberto</a> h&aacute; 5 anos atr&aacute;s. O Facebook <a href="https://www.facebook.com/notes/facebook-engineering/presto-interacting-with-petabytes-of-data-at-facebook/10151786197628920">Presto</a> &eacute; baseado no <a href="http://www.infoq.com/news/2013/11/Presto">ANSI SQL</a> e promete an&aacute;lises ad hoc atrav&eacute;s de velocidades escalares e interativa de at&eacute; petabytes. O c&oacute;digo est&aacute; dispon&iacute;vel no <a href="https://github.com/facebook/presto">GitHub</a>.</p><br><br><br><br><br><br></body></html>