<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Android 4.4 KitKat和Secret Key Factory</h3><p>随着Android 4.4的发布,开发者需要改变之前通过SecretKeyFactory从Unicode密码断语中生成对称密钥的方法。如果用户允许使用Unicode密码断语，那么这个改变将影响那些使用PBKDF2WithHmacSHA1密钥生成算法的程序。</p>
<p>以前的PBKDF2WithHmacSHA1算法只是关注密码断语中每个字符的低8位。这和由RSA实验室2000年9月发布的<a href="http://tools.ietf.org/html/rfc2898">PKCS #5: 基于口令的密码系统规范版本2.0</a>相冲突。</p>
<p>由于这是重大的更改，开发者通过使用旧的算法实现向后兼容。这个旧版本已更名为PBKDF2WithHmacSHA1And8bit，并且可以从<a href="http://android-developers.blogspot.com/2013/12/changes-to-secretkeyfactory-api-in.html">Android开发者博客</a>中获得其样例代码。</p>
<pre><p>SecretKeyFactory factory;<br />if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {<br />    // Use compatibility key factory -- only uses lower 8-bits of passphrase chars<br />    factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1And8bit&quot;);<br />} else {<br />    // Traditional key factory. Will use lower 8-bits of passphrase chars on<br />    // older Android versions (API level 18 and lower) and all available bits<br />    // on KitKat and newer (API level 19 and higher).<br />    factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);<br />}</p></pre>
<p><b>查看英文原文：</b><a href="查看英文原文：Android 4.4 KitKat and the Secret Key Factory">Android 4.4 KitKat and the Secret Key Factory</a></p><br><br><br><br><br><br></body></html>