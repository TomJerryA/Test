<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>使用Marvel Comics的API访问复仇者联盟</h3><p><img style="float: left; margin-right: 10px" src="http://infoqstatic.com/resource/news/2014/02/marvel-comics-api/zh/resources/0211000.jpg" _href="img://null" _p="true" alt="" />最近，Marvel启用了<a href="http://developer.marvel.com/">一套公开的API和RESTful服务</a>，开放了对其漫画元数据的访问。<br /> <br /> <a href="http://www.soa.com/">SOA软件</a>的执行副总裁Roberto Medrano认为，在2014年以及接下来的时间里，<a href="http://www.businesscomputingworld.co.uk/2014-predictions-for-apis-hold-on-to-your-hats/">我们将看到Web API得到“广泛采用”</a>。除了API将推动移动应用的发展外，移动+云端的模式也将促成伟大的结合：“当API通过云服务发挥作用时，与传统上通过平台的方式相比，API连接和交付的能力以几何级数的速度得到了简化。”他还表示：除此之外，软件定义的数据中心将依赖API，而“物联网也将转变为万物之间的API”，SOA和API将越来越被看作是互补的，而哪怕是REST也将得以演进。它将借助“诸如WADL、Swagger|RAML和其他新标准——由于其灵活性，这些新标准将填补REST的漏洞以及在定义服务描述方面的缺陷”所带来的贡献。</p>
<p>因此，Marvel通过公共API开放对其漫画和角色的访问也毫不奇怪。除了来自娱乐角度的吸引力外，<a href="http://developer.marvel.com/">Marvel Comics API</a>也为一套Web API应该如何设计做出了榜样。Marvel以一套RESTful服务来面向HTTP请求提供JSON响应，不过其端点目前仅支持GET方式。</p>
<p>Marvel API提供的资源包括：</p>
<ul> 
 <li><strong>漫画：</strong>独立印刷或数字化的漫画题材、集合以及漫画小说。例如：《神奇的幻想》第十五期（<a href="http://marvel.com/comics/issue/16926/amazing_fantasy_1962_15">Amazing Fantasy #15</a>，后改名为神奇的蜘蛛侠）。</li> 
 <li><strong>系列漫画：</strong>连续编号（大部分情况下编号是连续的）、拥有相同名称的系列漫画。例如X战警：神秘版（<a href="http://marvel.com/comics/series/2258/uncanny_x-men_1963_-_2011">Uncanny X-Men</a>）。</li> 
 <li><strong>漫画故事：</strong>不可分割的、可复用的漫画组成。例如，来自《神奇的幻想》第十五期的封面，或是源自该期杂志的最初的蜘蛛侠故事。</li> 
 <li><strong>漫画事件和跨界穿越：</strong>大型的、跨界的故事线。例如《无限》（<a href="http://marvel.com/comics/events/315/infinity">Infinity</a>）。</li> 
 <li><strong>创作者：</strong>创作漫画的女人、男人或组织机构。例如<a href="http://marvel.com/comics/creators/196/kirby_jack">Jack Kirby</a>。</li> 
 <li><strong>角色：</strong>占据了Marvel世界的女人、男人、组织机构、异形物种、神灵、动物、非物质单元、穿越（跨时空之旅）、抽象人格以及<a href="http://marvel.com/universe/Doop">绿色变形怪物</a>（Doop）。例如：<a href="http://marvel.com/characters/bio/1009610/spider-man">蜘蛛侠</a>。</li> 
</ul>
<p>一份请求<em>复仇者联盟</em>角色的示例如下：</p>
<pre><a href="http://gateway.marvel.com/v1/public/characters/1009165?apikey=xxxxx">http://gateway.marvel.com:80/v1/public/characters/1009165?apikey=xxxxx</a></pre>
<p>而经过缩短的响应如下：</p>
<pre>
{
  &quot;code&quot;: 200,
  &quot;status&quot;: &quot;Ok&quot;,
  &quot;etag&quot;: &quot;e52e95f71334d797c3c2d0cf144bcc3e611718db&quot;,
  &quot;data&quot;: {
    &quot;offset&quot;: 0,
    &quot;limit&quot;: 20,
    &quot;total&quot;: 1,
    &quot;count&quot;: 1,
    &quot;results&quot;: [
      {
        &quot;id&quot;: 1009165,
        &quot;name&quot;: &quot;Avengers&quot;,
        &quot;description&quot;: &quot;Earth's Mightiest Heroes joined forces to 
take on threats 
          that were too big for any one hero to tackle. 
          With a roster that has included Captain America, Iron Man,
 Ant-Man, Hulk, Thor, Wasp 
          and dozens more over the years, the Avengers have come to 
be regarded as Earth's No. 1 team.&quot;,
     …

      }
     ]
   }
 }
</pre>
<p>Marvel Comics API支持鉴权、版本管理、通过ID检索资源合集或资源、跨网站请求、压缩，以及用来避免将同一响应返回两次（如果在两次请求之间，请求的内容没有发生改变）的eTags。其数据库提供了庞大的图片合集，例如上图就是通过在复仇者联盟的响应中提供的路径检索而得。开发者的访问频度被限制在每账户1000API请求。</p>
<p>Apigee的电子书《<a href="http://blog.apigee.com/detail/announcement_new_ebook_on_web_api_design/">Web API设计：打造开发者喜爱的接口</a>》针对Web API的设计，给出了详细的建议。</p>
<p><strong>查看英文原文：</strong><a href="http://www.infoq.com/news/2014/02/marvel-comics-api">Getting the Avengers with Marvel Comics API</a></p><br><br><br><br><br><br></body></html>