<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Entity Framework 6添加了对DynamicData和EntityDataSource控件的支持</h3><p>在Entity Framework 6中，微软除了用Microsoft.AspNet.EntityDataSource更新了模板之外，还添加了对<a href="http://www.nuget.org/packages/Microsoft.AspNet.DynamicData.EFProvider">DynamicData</a>和<a href="http://www.nuget.org/packages/Microsoft.AspNet.EntityDataSource">EntityDataSource</a>控件的支持。DynamicData包可用于使用Entity Framework 6创建的<a href="http://msdn.microsoft.com/en-us/data/jj193542.aspx">代码先行</a>或<a href="http://msdn.microsoft.com/en-us/data/jj205424.aspx">模型先行</a>的项目，同时这些项目还必须安装了必要的包、实体和字段模板。</p>
<p>要使用DynamicData控件，需要创建一个新的ASP.NET Dynamic Data实体Web应用程序，添加Microsoft.AspNet.DynamicData.EFProvider的NuGet包，这会添加对DynamicData EFProvider二进制文件的引用，并安装所需的模板。</p>
<p>接着，使用EF代码先行或设计器创建模型，然后在<a href="http://msdn.microsoft.com/en-us/library/1xaas8a2(v=vs.71).aspx">Global.asax.cs</a>文件中添加如下代码，注册Entity Framework模型。</p>
<pre>
DefaultModel.RegisterContext(   
new Microsoft.AspNet.DynamicData.ModelProviders.EFDataModelProvider(()
 =&gt; newNorthwindEntities1()), 
    newContextConfiguration { ScaffoldAllTables = true });
</pre>
<p>另一方面，Microsoft.AspNet.EntityDataSource包会安装运行时二进制文件和Entity Framework 6的<a href="http://www.nuget.org/">NuGet</a>包。还需要在web.config文件中添加如下所示的标签前缀：</p>
<pre>
&lt;pages&gt; 
&lt;controls&gt; 
&lt;addtagPrefix=&quot;ef&quot;assembly=&quot;Microsoft.AspNet.EntityDataSource&quot; 
namespace=&quot;Microsoft.AspNet.EntityDataSource&quot; /&gt; 
&lt;/controls&gt; 
&lt;/pages&gt; </pre>
<p>最后，创建一个新的Web表单页，用下面的代码将EntityDataSource控件绑定到GridView或FormView上：</p>
<pre>
&lt;ef:EntityDataSourceID=&quot;GridDataSource&quot;runat=&quot;server&quot;EnableDelete=&quot;true&quot;/&gt;
</pre>
<p>安装的模板将取代Microsoft.AspNet.EntityDataSource包中默认的EntityDataSource控件。它还解决了一些与多对多字段模板相关的问题。不过，Microsoft.AspNet.DynamicData.EFProvider中的模板面向的是C#和Web Application项目，不能用于WebSites项目。</p>
<p><strong>原文英文链接：</strong><a href="http://www.infoq.com/news/2014/02/dynamicdata-ef6">DynamicData and EntityDataSource Updated with Entity Framework 6 Support</a></p><br><br><br><br><br><br></body></html>