<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>Mac OS X and BTRFS support in Docker</h3><p>As part of the <a href="http://blog.docker.io/2014/02/docker-0-8-quality-new-builder-features-btrfs-storage-osx-support/">0.8 release</a> the Docker.io team have announced support for <a href="http://docs.docker.io/en/latest/installation/mac/">installation on Mac OS X</a> and the use of the <a href="http://en.wikipedia.org/wiki/Btrfs">BTRFS</a> as an alternative to <a href="http://en.wikipedia.org/wiki/Aufs">AUFS</a>.</p>
<p>Mac support consists of a <a href="http://get.docker.io/builds/Darwin/x86_64/docker-latest">native Docker OS X client</a>, and a lightweight <a href="https://github.com/steeve/boot2docker">Boot2Docker</a> virtual machine (VM) that must run in <a href="http://en.wikipedia.org/wiki/Virtualbox">VirtualBox</a> (as OS X doesn’t have the underlying support for Linux containers required by Docker). Prior to this release Mac users would have to run both the Docker client and daemon in a Linux virtual machine.</p>
<p>The Docker team have a stated desire to port Linux containers (<a href="http://en.wikipedia.org/wiki/Lxc">LXC</a>) and other dependencies to OS X, but for now their daemon must run in a VM. Boot2Docker provides a minimal linux environment, and a set of command line scripts to work with VirtualBox. Boot2Docker provides lifecycle management, and also takes care of port mappings for SSH and the Docker daemon running in the VM. The DOCKER_HOST environment variable is used so that the client can connect to a Docker daemon on TCP rather than the default native Unix socket. Unfortunately Boot2Docker doesn’t yet integrate with Docker’s own port mapping mechanism, so it’s presently necessary to <a href="https://github.com/dotcloud/docker/issues/4007">map ports in both VirtualBox and Docker</a> in order to connect from the host Mac to services running inside containers.</p>
<p>The BTRFS driver is described as experimental, and requires an existing BTRFS partition to be set up. The use of an underlying <a href="http://en.wikipedia.org/wiki/Copy_on_write">copy on write</a> filesystem is essential to the working of Docker where images, and containers spawned from images, are made up of layers with each layer mapping to a filesystem branch. Work is also in progress on a <a href="http://en.wikipedia.org/wiki/Zfs">ZFS</a> driver.</p>
<p>The Docker.io team have also announced that they will now make one release per month, with releases not tied to any specific features. This follows a <a href="http://blog.docker.io/2014/01/docker-closes-15-m-series-b-funding/">$15m investment round</a> led by former VMware VP <a href="http://www.greylock.com/teams/50-Jerry-Chen">Jerry Chen of Greylock Partners</a> that was slated for getting Docker production ready, building out the community platform, and finding routes to commercialisation. The Docker team have also committed that their <a href="https://github.com/dotcloud/docker">github master branch</a> will be stable, making it the point of reference for those wanting the latest version. Prior to the latest investment round <a href="http://www.infoq.com/news/2013/10/dotcloud-renamed-docker">dotCloud changed their company name to Docker Inc</a>.</p>
<p>Further background on Docker and how it’s used can be found in Zef Hemel’s ‘<a href="http://www.infoq.com/articles/docker-containers/">Docker: Using Linux Containers to Support Portable Application Deployment</a>’.</p><br><br><br><br><br><br></body></html>