<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /></head><body><h3>C#的未来计划</h3><p>在<a href="http://ndc-london.com/">NDC London</a>上，Mads Torgersen提出了对未来C#语言的的计划。需要注意的是，这些只是计划，不会保证在哪个版本发布。<a href="http://damieng.com/blog/2013/12/09/probable-c-6-0-features-illustrated">Damien Guard</a>对这些建议进行了总结和简要的分析，我们在此为您挑选了其中的一些内容。</p>
<p><strong>只读属性</strong></p>
<p>只读自动属性将允许开发者在一行代码中声明属性及其后台字段。</p>
<pre><code>public int X { get; } = x; </code></pre>
<p><strong>静态类型using语句</strong></p>
<p>Visual Basic和Java都允许在命名空间中导入模块（C#静态类）。这样可以移除常用的静态函数前面的重复代码，如“Math.”。</p>
<p><strong>主构造函数</strong></p>
<p>通过在类名后加上参数，开发者将不再需要显式创建构造函数。这可以移除将构造函数参数复制到私有字段时的冗长代码。</p>
<pre><code>public class Point(int x, int y)  {     private int x, y; } </code></pre>
<p><strong>属性和方法表达式</strong></p>
<p>属性表达式可以为简单的只读属性剔除一些原来必须的样板代码。</p>
<pre><code>public double Distance =&gt; Math.Sqrt((X * X) + (Y * Y)); </code></pre>
<p>方法表达式也是如此，当然它们可以接受参数。注意，参数化的属性仍然没有列入考虑范围之内。在未来相当长一段时间里，这只能是VB独有的特性。</p>
<p><strong>函数参数</strong></p>
<p>如今大多数开发者从来不用数组，除非要使用params关键字。因此有人提议让params也支持IEnumerable
 <t>
  接口。如果这样做，其他语言（如Visual Basic）也需要支持。还有人提议可以使用out关键字声明局部变量。例如，
 </t></p>
<pre><code>int.TryParse(&quot;123&quot;, out int x); </code></pre>
<p><strong>空传播</strong></p>
<p>在处理凌乱的数据时，开发者经常需要在读取属性或调用方法前编写一系列空判断逻辑。?.语法将帮助我们剔除这些逻辑，只有当它前面的值不为空时，才会调用后面的方法。</p>
<pre><code>var bestValue = points?.FirstOrDefault()?.X; </code></pre>
<p>在本例中，如果points为空，或points.FirstOrDefault()返回空，那么将忽略.X，并返回空。它也可以和??连接使用，以提供可选的默认值。</p>
<pre><code>var bestValue = points?.FirstOrDefault()?.X ?? -1; </code></pre>
<p>Objective-C和Smalltalk这样的“消息传递”语言都包含这样的语法。它通常被认为是有问题的，因为本应抛出空引用异常的地方，却悄无声息地被忽略了。</p>
<p><strong>原文英文链接：</strong><a href="http://www.infoq.com/news/2013/12/CSharp-Futures">Future Plans for C#</a></p><br><br><br><br><br><br></body></html>